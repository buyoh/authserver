@startuml
skinparam componentStyle rectangle

' ---------------------------------------------------------
' components

package app{
interface ResourceProvider

class AppMain
class AppExpress
class AppHandler
class ResourceManagerAppImpl
class AppUserSession
}

package user_profile {
class UserProfileManagerImpl
interface UserProfileManager

class User
}

package crypto {
class OtpAuthCrypto
}

package storage{
interface KeyValusStorageInterface
class MongoStorage
() StorageBuilder
}

interface express

' ---------------------------------------------------------
' relations

' === app ===

AppMain o--> AppExpress
AppMain ..> AppHandler
AppMain ..> StorageBuilder
AppMain ..> ResourceManagerAppImpl

ResourceProvider ..> UserProfileManager
ResourceManagerAppImpl -up-|> ResourceProvider
ResourceManagerAppImpl o--> UserProfileManagerImpl

AppHandler o--> ResourceProvider
AppHandler ..> User
AppHandler ..> AppUserSession
AppHandler ..> UserProfileManager


AppExpress o-right-> AppHandler
AppExpress ..> express
AppExpress o..> AppUserSession

' === user_profile ===

UserProfileManagerImpl -up-|> UserProfileManager
UserProfileManagerImpl o--> KeyValusStorageInterface
UserProfileManagerImpl o--> OtpAuthCrypto
UserProfileManager ..> User
UserProfileManagerImpl ..> User

' === storage ===

MongoStorage -|> KeyValusStorageInterface
StorageBuilder ..> MongoStorage

@enduml